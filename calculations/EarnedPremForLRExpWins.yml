unique_name: EarnedPremForLRExpWins
object_type: metric_calc
label: EarnedPremForLRExpWins
description: >-
  Earned premium for Loss Ratio calculation. If filtered by both calendar and
  exposure, the Calendar filter is ignored, so premium returned is by exposure.
expression: >-
  0 /*IF ( AND ( ISCROSSFILTERED ( 'Calendar Period'[Cal Month] ), NOT (
  ISCROSSFILTERED ( 'Exposure Period'[Exposure Month] ) ) ), CALCULATE ( SUM (
  Premium[Premium_Amt] ), ALLEXCEPT ( 'Amount Measure', 'Amount Measure'[Total]
  ), 'Amount Measure'[Total] = "Earned Premium", FILTER ( 'Exposure Period',
  CONTAINS ( VALUES ( 'Calendar Period'[Cal Month] ), 'Calendar Period'[Cal
  Month], 'Exposure Period'[Exposure Month] ) && 'Exposure Period'[Exposure
  Month] <= [MaxAcctMt] && 'Exposure Period'[Exposure Month] <= [MaxIBNRAsOfMt]
  ), ALLEXCEPT ( CAT, CAT[Exposure YEAR] ) ), CALCULATE ( SUM (
  Premium[Premium_Amt] ), ALLEXCEPT ( 'Amount Measure', 'Amount Measure'[Total]
  ), 'Amount Measure'[Total] = "Earned Premium", KEEPFILTERS ( FILTER (
  'Exposure Period', 'Exposure Period'[Exposure Month] <= [MaxIBNRAsOfMt] ) ),
  ALLEXCEPT ( CAT, CAT[Exposure YEAR] ) ) ) TODO: Update with valid MDX
  expression*/
format: \$#,0;(\$#,0);\$#,0
is_hidden: true
