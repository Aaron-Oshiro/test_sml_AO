unique_name: ITD Loss Ratio
object_type: metric_calc
label: ITD Loss Ratio
description: >-
  Provides the ratio [ITD Loss]/[ITD Earned Premium] %. [ITD Loss] is depending
  on the selection on [Amount Hierarchy]. ITD calculation depends on usage; If
  sliced by calendar, then ITD by calendar; If by quarterly development then ITD
  by quarterly development; If by month or year development then by monthly
  development.
expression: >-
  0 /*SWITCH ( [ITD Control], "C", CALCULATE ( DIVIDE ( [IBNRBase] + [Case
  Incurred Incl AAO], [EarnedPremForITDLR] ), ALL ( 'Development Point' ),
  DATESBETWEEN ( 'Calendar Period'[DatePK], BLANK (), LASTDATE ( 'Calendar
  Period'[DatePK] ) ) ), "Q", CALCULATE ( DIVIDE ( [IBNRBase] + [Case Incurred
  Incl AAO], [EarnedPremForITDLR] ), FILTER ( ALL ( 'Development Point' ),
  'Development Point'[Ordqtr1] <= MAXX ( VALUES ( 'Development Point'[Ordqtr1]
  ), 'Development Point'[Ordqtr1] ) ) ), "Y", CALCULATE ( DIVIDE ( [IBNRBase] +
  [Case Incurred Incl AAO], [EarnedPremForITDLR] ), FILTER ( ALL ( 'Development
  Point' ), 'Development Point'[OrdMonth] <= MAXX ( VALUES ( 'Development
  Point'[OrdMonth] ), 'Development Point'[OrdMonth] ) ) ), "RQ", CALCULATE (
  DIVIDE ( [IBNRBase] + [Case Incurred Incl AAO], [EarnedPremForITDLR] ), FILTER
  ( ALL ( 'Report Development Point' ), 'Report Development Point'[Ordqtr1] <=
  MAXX ( VALUES ( 'Report Development Point'[Ordqtr1] ), 'Report Development
  Point'[Ordqtr1] ) ) ), "RY", CALCULATE ( DIVIDE ( [IBNRBase] + [Case Incurred
  Incl AAO], [EarnedPremForITDLR] ), FILTER ( ALL ( 'Report Development Point'
  ), 'Report Development Point'[OrdMonth] <= MAXX ( VALUES ( 'Report Development
  Point'[OrdMonth] ), 'Report Development Point'[OrdMonth] ) ) ) ) TODO: Update
  with valid MDX expression*/
folder: Loss Ratio
format: 0.0%;-0.0%;0.0%
